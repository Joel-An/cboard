<!DOCTYPE html>
<html>

<head>
    <% include ../layout/head %>
</head>

<body>
    <% include ../layout/header %>

    <div class="container">
        <h1>제목 :
            <%=post.title%>
        </h1>
        <h3>작성자 :
            <%=post.authorId.name%>
        </h3>
        <h3>내용 :
            <%=post.contents%>
        </h3>
        <form action="/board/<%=boardInfo.nameEng%>" method="get">
            <input type="submit" class="btn btn-primary pull-right" value="목록">
        </form>
        <% if(user.id === post.authorId.id) { %>        
        <form action="/modify/<%=post._id%>" method="get">
            <input type="submit" class="btn btn-primary pull-right" value="수정">
        </form>
        <form action="/post/delete?_method=DELETE" method="POST">
            <input type="hidden" name="id" value="<%=post.id%>" />
            <input type="submit" class="btn btn-primary pull-right" value="삭제">
        </form>
        <% } %>        
        <br>
        <hr>

        <% if (post.commentIds !== null) {
                                var comment = post.commentIds;
                                  for(var i = 0; i < post.commentIds.length; i++) {%>
        <h4>작성자 :
            <%=comment[i].author%>
        </h4>
        <h4>내용 :
            <%=comment[i].contents%>
        </h4>
        <form action="/modify/comment/<%=commentIds[i]._id%>" method="get">
            <input type="submit" class="btn btn-default pull-right" value="수정">
        </form>
        <form action="/comment/delete?_method=DELETE" method="POST">
            <input type="hidden" name="comment_id" value="<%=comment[i]._id%>" />
            <input type="hidden" name="article_id" value="<%=post._id%>" />
            <input type="submit" class="btn btn-default pull-right" value="삭제">
        </form>
        <br>
        <hr>
        <%}}%>

        <form action="/comment/write" method="post">
            <table class="table table-striped" style="text-align: center">
                <thead>
                    <tr>
                        <th colspan="1" style="background-color:#eeeeee; text-align: center;">댓글 작성</th>
                    </tr>
                </thead>
                <tbody>
                    <input type="text" name="id" value="<%=post._id%>" hidden="">
                    <tr>
                        <td><input type="text" class="form-control" placeholder="댓글 작성자" name="author" maxlength="25"></td>
                    </tr>
                    <tr>
                        <td><textarea class="form-control" placeholder="댓글 내용" name="contents" maxlength="2048" style="height:50px"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
            <input type="submit" class="btn btn-primary pull-right" value="확인">
        </form>

    </div>

    <% include ../layout/script %>
</body>

</html>